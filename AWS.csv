CloudWatch,,,,
RDSの標準メトリクス一覧,,,,
,,,,
メトリクス,内容,単位,,
BinLogDiskUsage,マスターのバイナリログのサイズ,Bytes,,
CPUUtilization, CPU使用率,パーセント,,
DatabaseConnections, DBコネクション数,数,,
DiskQueueDepth, ディスクI/Oキュー数,数,,
FreeableMemory, 空きメモリ量,Bytes,,
FreeStorageSpace, 空きディスクスペース量,Bytes,,
ReplicaLag, リードレプリカのタイムラグ,秒,,
SwapUsage, スワップ使用量,Bytes,,
ReadIOPS, 読み込みIOPS, 数/秒,,
WriteIOPS, 書き込みIOPS, 数/秒,,
ReadLatency, 読み込みレイテンシ, 秒,,
WriteLatency, 書き込みレイテンシ, 秒,,
ReadThroughput, 読み込みスループット, bytes/秒,,
WriteThroughput, 書き込みスループット, bytes/秒,,
,,,,
,,,,
,,,,
,,,,
,,,,
,,,,
無料利用枠,メトリクス,基本モニタリングのメトリクス (5 分間隔),,
,,詳細モニタリングのメトリクス 10 個 (1 分間隔),,
,, 100 万の API リクエスト (GetMetricData および GetMetricWidgetImage には適用されません),,
,ダッシュボード,毎月最大 50 個のメトリクスに対応するダッシュボード 3 個,,
,アラーム,10 件のアラームメトリクス (高分解能アラームには適用されません),,
,ログ,5 GB データ (取り込み、ストレージのアーカイブ、Logs Insights クエリによってスキャンされたデータ),,
,イベント,カスタムイベントを除くすべてのイベントが対象,,
,,,,
有料利用枠,メトリクス,範囲,コスト (メトリクス/月),
,,"最初の 10,000 メトリクス",0.30USD,
,,"次の 240,000 メトリクス",0.10USD,
,,"次の 750,000 メトリクス",0.05USD,
,,"1,000,000 を超えるメトリクス",0.02USD,
,"メトリクス
API",GetMetricData,"リクエストされた 1,000 のメトリクスあたり 0.01USD",
,,GetMetricWidgetImage,"リクエストされた 1,000 のメトリクスあたり 0.02USD",
,,GetMetricStatistics、ListMetrics、PutMetricData、GetDashboard、ListDashboards、PutDashboard および DeleteDashboards のリクエスト,"リクエストされた 1,000 のメトリクスあたり 0.01USD",
,ダッシュボード,ダッシュボード,1 か月当あたりのダッシュボードあたり 3.00USD,
,アラーム,標準分解能 (60 秒),アラームメトリクスあたり 0.1USD,
,,高分解能 (10 秒),アラームメトリクスあたり 0.3USD,
,ログ,収集 (データの取り込み),0.76USD/GB,
,,保存 (アーカイブ),0.033USD/GB,
,,分析 (Logs Insights のクエリ),スキャンしたデータ 1 GB あたり 0.0076USD,
,"ログ
Vended Logs および S3 へのログの提供",取り込まれたデータ,Vended Logs のコスト,S3 にログを配信するコスト
,,,現在、Vended Logs の料金が適用されるのは VPC と Route53 のログです,現在、以下の料金が適用されるのは VPC フローログと Global Accelerator フローログです
,,最初の 10 TB まで,0.76USD/GB,0.38USD/GB
,,次の 20 TB,0.38USD/GB,0.228USD/GB
,,次の 20 TB,0.152USD/GB,0.114USD/GB
,,50TB 超,0.076USD/GB,0.076USD/GB
,,保存されたデータ,0.033USD/GB,
,,,,
,,,,
インフラストラクチャのモニタリングとトラブルシューティング,,,,
重要なメトリクスとログの監視、アプリケーションとインフラストラクチャスタックの可視化、アラームの作成、およびメトリクスとログの関連付けを行って、AWS のリソースにおけるパフォーマンス問題の根本的な原因を理解し、解決します。これには、Amazon ECS、AWS Fargate、Amazon EKS、および Kubernetes 全体のコンテナエコシステムの監視が含まれます。,,,,
,,,,
平均解決時間の改善,,,,
CloudWatch は、メトリクスとログを関連付け、可視化し、分析するために役立つことから、問題を解決するためにすばやく行動し、エンドツーエンドのオブザーバビリティのためにそれらを AWS X-Ray からのトレースデータと組み合わせることができます。ユーザーリクエストを分析して、トラブルシューティングとデバッグの迅速化と、全体的な平均解決時間 (MTTR) の短縮に役立てることもできます。,,,,
,,,,
プロアクティブなリソースの最適化,,,,
CloudWatch アラームは、ユーザーが指定するしきい値、または CloudWatch が異常動作を検知するために機械学習モデルを使用して作成するしきい値に照らしてメトリック値を監視します。CloudWatch は、アラームがトリガーされると、Amazon EC2 Auto Scaling を有効化したり、インスタンスを停止したりするなどのアクションを自動で実行できるため、キャパシティーおよびリソース計画の自動化が可能になります。,,,,
,,,,
アプリケーションのモニタリング,,,,
AWS (Amazon EC2、コンテナ、およびサーバーレス) またはオンプレミスで実行されるアプリケーションを監視します。CloudWatch は、メトリクスやログなど、パフォーマンススタックの全レイヤーのデータを自動ダッシュボードで収集します。,,,,
,,,,
ログ分析,,,,
運用上の問題に対処し、アプリケーションパフォーマンスを向上させるために、ログを調査、分析、および可視化します。迅速かつ効率的に運用上の問題に対応できるようにするクエリを実行することが可能です。問題が発生した場合は、専用のクエリ言語を使ってただちにクエリを開始して、潜在的な原因をすばやく特定することができます。,,,,
,,,,
,,,,
,,,,
,,,,
,,,,
収集,,,,
,,,,
ログを容易に収集および保存,,,,
Amazon CloudWatch Logs サービスを使用すると、リソース、アプリケーション、サービスのログをほぼリアルタイムで収集し、保存できます。ログには主なカテゴリが 3 つあります。1 つ目は、Vended Logs です。これは、お客様に代わって AWS のサービスがネイティブに発行するログです。現在、Amazon VPC フローログと Amazon Route 53 ログの 2 種類に対応しています。2 つ目は、AWS のサービスが発行するログです。現在、30 種類を超える AWS のサービスが CloudWatch にログを発行しています。Amazon API Gateway、AWS Lambda、AWS CloudTrail など、多くのサービスが対象となっています。3 つ目は、カスタムログです。これらは、ユーザー独自のアプリケーションやオンプレミスのリソースから取得されるログです。AWS Systems Manager を使用して CloudWatch エージェントをインストールするか、PutLogData API アクションを使用することで、ログを簡単に発行できます。,,,,
,,,,
組み込みメトリクス,,,,
分散アプリケーション (マイクロサービスアーキテクチャを使用して構築されたアプリケーションなど) からのメトリクスの収集には時間がかかります。Amazon CloudWatch を使用すると、70 種類を超える AWS のサービス (Amazon EC2、Amazon DynamoDB、Amazon S3、Amazon ECS、AWS Lambda、Amazon API Gateway など) からデフォルトのメトリクスを収集できます。ユーザーによる作業は必要ありません。例えば、EC2 インスタンスでは、CPU 使用率、データ転送、ディスクの使用状況に関するメトリクスが自動的に発行されるため、状態の変化を把握する上で役立ちます。API Gateway 向けに組み込まれている 7 つのメトリクスのいずれかを使用して、レイテンシーを検出することが可能です。または、AWS Lambda 向けに組み込まれている 8 つのメトリクスのいずれかを使用して、エラーやスロットルを検出することが可能です。デフォルトのメトリクスよりも詳細なメトリクスが必要な場合 (シャードレベルの Amazon Kinesis Data Streams メトリクスなど)、リソースごとに簡単に選択できます。,,,,
,,,,
カスタムメトリクス,,,,
Amazon CloudWatch を使用すると、ユーザー独自のアプリケーションからカスタムメトリクスを収集できるため、運用パフォーマンスのモニタリング、問題のトラブルシューティング、動向の把握が可能になります。一定期間にわたって収集およびモニタリングできるカスタムメトリクスには、ユーザーアクティビティが含まれます。CloudWatch エージェントまたは PutMetricData API アクションを使用することで、これらのメトリクスを CloudWatch に発行できます。CloudWatch の機能は、最大 1 秒間隔で、統計、グラフ、アラームなど、独自のカスタムメトリクスデータにも利用可能です。,,,,
,,,,
モニタリング,,,,
ダッシュボードを使用した運用状態の統一的な確認,,,,
Amazon CloudWatch ダッシュボードでは、再利用可能なグラフを作成することや、クラウドリソースとアプリケーションを統合的な視点で可視化することができます。単一のダッシュボードでメトリクスとログデータを並べてグラフ化することで、すばやく状況を把握し、問題を診断して根本的な原因を理解できます。例えば、CPU 使用率やメモリなどの主要なメトリクスを可視化して、キャパシティーと比較することができます。また、特定のメトリクスに関するログパターンの関連性を示すことや、アラームを設定してパフォーマンスの問題や運用上の問題について事前にアラートを受け取ることも可能です。これにより、システム全体のオペレーションの状態を確認し、問題のトラブルシューティングを迅速に実施できるため、問題解決に要する平均時間 (MTTR) の短縮が可能になります。,,,,
,,,,
高分解能アラーム,,,,
Amazon CloudWatch のアラームを使用すると、メトリクスにしきい値を設定してアクションをトリガーできます。高分解能アラームを作成して、統計としてパーセンタイル値を設定し、必要に応じてアクションを指定または無視できます。例えば、Amazon EC2 メトリクスにアラームを作成し、通知を設定して、未使用のインスタンスや使用率が低いインスタンスを検出してシャットダウンするためのアクションを 1 つまたは複数設定できます。メトリクスやイベントにリアルタイムのアラームを使用すると、ダウンタイムを最小化し、ビジネスに影響を及ぼす可能性を最低限に抑えることができます。,,,,
,,,,
ログとメトリクスの関連付け,,,,
アプリケーションおよびインフラストラクチャのリソースでは、大量のオペレーションデータとモニタリングデータがログとメトリクスの形式で生成されます。Amazon CloudWatch では、単一のプラットフォームでこれらのデータセットにアクセスして可視化できることに加え、メトリクスとログを簡単に関連付けることもできます。これにより、問題を迅速に診断し、根本的な原因を把握することが可能になります。例えば、エラーと特定のメトリクスなどのログパターンを関連付けることで、パフォーマンスの問題とオペレーションの問題に関してアラームを積極的に受け取るよう設定できます。,,,,
,,,,
Application Insights for .NET and SQL Server アプリケーション,,,,
Amazon CloudWatch Application Insights for .NET and SQL Server を使用することで、.NET および SQL Server アプリケーションを容易にモニタリングできるようになり、その結果、そうしたアプリケーションの稼働状況を可視化できます。稼働状況の可視化は、主要メトリクスを特定および設定したり、アプリケーションリソースおよびテクノロジースタック (データベース、ウェブ (IIS)、アプリケーションサーバー、オペレーティングシステム、ロードバランサー、キューなど) 全体でログを作成したりするのに役立ちます。この製品は異常やエラーを検出および関連付けしたり、アプリケーションで発生しているすべての問題を通知したりするためにこれらのテレメトリデータを継続的に監視します。トラブルシューティングの円滑化を図るため、検出された問題と相関するメトリクスの異常やログのエラーを示す自動化されたダッシュボードとともに、潜在的な根本原因を示唆する追加的な詳細情報を作成します。これにより、自分のアプリケーションが正常に稼動し、エンドユーザーが影響を受けないように迅速な対応を取れるようになります。,,,,
,,,,
アクション,,,,
Auto Scaling,,,,
Auto Scaling を使用すると、キャパシティーおよびリソースの計画を自動化できます。主要なメトリクスに関するアラームにしきい値を設定して、Auto Scaling アクションを自動でトリガーできます。例えば、Auto Scaling ワークフローを設定して、CPU 使用率のメトリクスに基づいて EC2 インスタンスを追加または削除できるようにすると、リソースの費用を最適化できます。,,,,
,,,,
CloudWatch Events を使用したオペレーション変更に関する応答の自動化,,,,
CloudWatch Events により、AWS リソースの変更を記述したシステムイベントをほぼリアルタイムでストリーミングできます。これにより、オペレーションの変更にすばやく応答し、修正作業を実行できます。必要な操作は、ルールを記述して、アプリケーションでの目的のイベントを指定し、イベントにルールが一致した場合に自動的に実行するアクションを指定することのみです。例えば、AWS Lambda 関数の呼び出しや Amazon Simple Notification Service (SNS) トピックの通知を実行するルールを設定できます。,,,,
,,,,
分析,,,,
詳細なデータと保持期間の延長,,,,
Amazon CloudWatch では、15 か月間保存および保持できるメトリクスデータにより、動向や季節的な傾向をモニタリングできます。このデータを使用して履歴分析を実行し、リソース使用率を細かく調整できます。CloudWatch を使用すると、ヘルスメトリクスを 1 秒単位まで収集することもできます。これには、オンプレミスアプリケーションから取得したメトリクスなどのカスタムメトリクスも含まれます。詳細なリアルタイムデータにより動向を視覚的に把握してモニタリングできるため、アプリケーションのパフォーマンスとオペレーションの状態を最適化することができます。,,,,
,,,,
メトリクスに対するカスタムオペレーション,,,,
Amazon CloudWatch Metric Math を使用すると、リアルタイム分析向けに複数のメトリクスを使用した計算が可能になるため、既存の CloudWatch メトリクスから簡単にインサイトを導き出し、オペレーションの状態やインフラストラクチャのパフォーマンスを詳細に把握できます。これらの計算されたメトリクスを AWS マネジメントコンソールで可視化して、CloudWatch ダッシュボードに追加するか、GetMetricData API アクションを使用してこれらのメトリクスを取得できます。Metric Math は +、-、/、* などの算術演算と、合計、平均、最小、最大、標準偏差などの数学関数に対応しています。,,,,
,,,,
ログ分析,,,,
Amazon CloudWatch Logs Insights を使うと、サーバーのプロビジョニングやソフトウェアの管理をする必要なしに、ログから得られる実用的なインテリジェンスでオペレーションの問題に対処できます。集計、フィルタ、および正規表現を含むクエリをすばやく記述できます。また、時系列データを視覚化し、個別のログイベントにドリルダウンして、クエリ結果を CloudWatch ダッシュボードにエクスポートすることもできます。これにより、操作を完全に視覚化することができます。AWS マネジメントコンソールで数回クリックするだけで、Logs Insights を使用して、CloudWatch に送信されたログにクエリを実行することができます。料金は実行したクエリに対してのみ発生します。,,,,
コンプライアンスとセキュリティ,,,,
,,,,
Amazon CloudWatch は AWS Identity and Access Management (IAM) と統合されているため、データへのアクセスをユーザーやリソースに許可する権限と、そのアクセス方法を制御できます。,,,,
また、Amazon CloudWatch Logs は、PCI および FedRamp に準拠しています。データは、保管時も転送中も暗号化されます。AWS KMS 暗号化を使用してログのグループを暗号化することで、コンプライアンスとセキュリティを強化することもできます。,,,,
,,,,
,,,,
,,,,
Q: すべてのメトリクスの保存期間はどうなっていますか?,,,,
CloudWatch は、2017 年 7 月 26 日に高分解能カスタムメトリクスの提供を開始しました。これにより、分解能 1 秒までのカスタムメトリクスをパブリッシュして保存できます。2016 年 11 月 1 日にメトリクス保存期間の延長が開始され、以前は 14 日間でしたが、お客様のすべてのメトリクスを 15 か月保存できるようになりました。CloudWatch では、次のようにメトリクスデータを保持します。,,,,
期間が 60 秒未満のデータポイントは 3 時間使用できます。このようなデータポイントが高分解能カスタムメトリクスです。,,,,
期間が 60 秒 (1 分) のデータポイントは、15 日間使用できます。,,,,
期間が 300 秒 (5 分) のデータポイントは、63 日間使用できます。 ,,,,
期間が 3600 秒 (1 時間) のデータポイントは、455 日 (15 か月) 間使用できます。,,,,
